<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Axon Thor Battery Charger Proposal | Alium Batteries</title>
    <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap');
        body { font-family: 'Inter', sans-serif; }
        .editable-input { 
            background: transparent; 
            border: none; 
            border-bottom: 2px dashed currentColor;
            outline: none;
            width: 100%;
        }
        .editable-input:focus {
            border-bottom: 2px solid currentColor;
        }
        .hover-highlight:hover {
            background: rgba(59, 130, 246, 0.1);
            cursor: pointer;
        }
    </style>
</head>
<body>
    <div id="root"></div>
    
    <script type="text/babel">
        const { useState, useEffect } = React;

        const AxonChargerProposal = () => {
            const [activeSection, setActiveSection] = useState('overview');
            const [editMode, setEditMode] = useState(true); // Start in edit mode
            
            // Header info - editable
            const [headerInfo, setHeaderInfo] = useState({
                projectTitle: 'Axon Thor Battery Charger',
                subtitle: '6-Bay Intelligent Charging System',
                companyName: 'Alium Batteries',
                date: 'January 2026'
            });

            // Charging Bay Specifications
            const [projectSpecs, setProjectSpecs] = useState([
                { id: 1, name: 'Charging Bays', value: '6' },
                { id: 2, name: 'Voltage Range', value: '10-17V' },
                { id: 3, name: 'Max Current', value: '7A per bay' },
                { id: 4, name: 'Efficiency', value: '94% DC/DC, 90% AC/DC' },
                { id: 5, name: 'Pack Capacity', value: '6.38 Ah' },
                { id: 6, name: 'Chemistry', value: 'LiPo' },
                { id: 7, name: 'Operating Temp', value: '0-40Â°C' },
                { id: 8, name: 'Storage Temp', value: '-25-75Â°C' }
            ]);

            // External Power Supply Specifications
            const [powerSupplySpecs, setPowerSupplySpecs] = useState([
                { id: 1, name: 'Input Voltage', value: '100-240V AC' },
                { id: 2, name: 'Input Frequency', value: '50/60 Hz' },
                { id: 3, name: 'Output Power', value: '300W' },
                { id: 4, name: 'Output Voltage', value: '24V DC' },
                { id: 5, name: 'Efficiency', value: '90% typical' },
                { id: 6, name: 'Power Factor', value: '>0.9' }
            ]);

            const [stageGates, setStageGates] = useState([
                {
                    id: 1,
                    stage: 1,
                    name: 'Kick Off',
                    duration: '1-2 Weeks',
                    nreCost: 8000,
                    activities: [
                        'Conduct kick-off meeting with Axon',
                        'Establish project team and protocols',
                        'Review mechanical design package',
                        'Initiate risk assessment',
                        'Define testing fixture requirements'
                    ],
                    deliverables: [
                        'Project charter',
                        'Risk assessment report',
                        'Specification confirmation',
                        'Thermal analysis plan'
                    ]
                },
                {
                    id: 2,
                    stage: 2,
                    name: 'Freeze Specifications',
                    duration: '2-3 Weeks',
                    nreCost: 35000,
                    activities: [
                        'Develop system architecture',
                        'Select power topology',
                        'Choose core components',
                        'Design SMBus architecture',
                        'Develop scaling algorithm',
                        'Create preliminary schematics',
                        'Define cooling strategy'
                    ],
                    deliverables: [
                        'Finalized specifications',
                        'Electrical architecture',
                        'Component selection report',
                        'Thermal simulation',
                        'Verification testing plan'
                    ]
                },
                {
                    id: 3,
                    stage: 3,
                    name: 'Proto Build Complete',
                    duration: '16-18 Weeks',
                    nreCost: 62000,
                    activities: [
                        'Design AC/DC power supply',
                        'Design DC/DC converters',
                        'Implement protection circuits',
                        'Design SMBus interface',
                        'Develop charge control firmware',
                        'Design thermal management',
                        'Create PCB layout',
                        'Fabricate 10 prototypes'
                    ],
                    deliverables: [
                        'Complete schematics',
                        'PCB layout and BOM',
                        'Firmware source code',
                        'SMBus protocol docs',
                        '10 prototype units',
                        'Test fixtures'
                    ]
                },
                {
                    id: 4,
                    stage: 4,
                    name: 'Proto Testing Complete',
                    duration: '10-12 Weeks',
                    nreCost: 58000,
                    activities: [
                        'Efficiency testing',
                        'Verify current scaling',
                        'Test SMBus communication',
                        'Validate protection circuits',
                        'Thermal testing',
                        'Acoustic noise testing',
                        'Environmental testing',
                        'Pre-compliance EMI/EMC'
                    ],
                    deliverables: [
                        'Test reports',
                        'Efficiency curves',
                        'Thermal analysis',
                        'EMI/EMC reports',
                        'Firmware validation',
                        'Optimization recommendations'
                    ]
                },
                {
                    id: 5,
                    stage: 5,
                    name: 'DVT Build Complete',
                    duration: '14-16 Weeks',
                    nreCost: 22000,
                    activities: [
                        'Refine design',
                        'Optimize PCB layout',
                        'Finalize component sourcing',
                        'Kick off tooling',
                        'Update firmware',
                        'Build 25 DVT units'
                    ],
                    deliverables: [
                        'Finalized schematics',
                        'Production BOM',
                        'DFMEA',
                        'Tooling quotes',
                        '25 DVT units',
                        'Updated firmware'
                    ]
                },
                {
                    id: 6,
                    stage: 6,
                    name: 'DVT Testing Complete',
                    duration: '12-14 Weeks',
                    nreCost: 65000,
                    activities: [
                        'Full regulatory testing',
                        'Complete EMC testing',
                        'Safety certification',
                        'Comprehensive DVT testing',
                        'Reliability testing',
                        'Environmental screening',
                        'RoHS/REACH verification'
                    ],
                    deliverables: [
                        'Regulatory certificates',
                        'Complete DVT reports',
                        'Reliability analysis',
                        'Compliance documentation',
                        'PFMEA'
                    ]
                },
                {
                    id: 7,
                    stage: 7,
                    name: 'PPAP & Production Ready',
                    duration: '8-10 Weeks',
                    nreCost: 20000,
                    activities: [
                        'Compile design package',
                        'Final design review',
                        'Prepare production docs',
                        'Support production setup',
                        'Train production team',
                        'Validate test fixtures'
                    ],
                    deliverables: [
                        'Complete source files',
                        'PPAP documentation',
                        'Production instructions',
                        'Test fixture docs',
                        'Final project report',
                        'Certificate of Conformance'
                    ]
                }
            ]);

            const [costItems, setCostItems] = useState([
                { id: 1, item: 'Proto Tooling & Setup', cost: 18000 },
                { id: 2, item: 'Proto 10 Samples', cost: 15000 },
                { id: 3, item: 'Pre-Compliance Testing', cost: 28000 },
                { id: 4, item: 'DVT Tooling', cost: 42000 },
                { id: 5, item: 'DVT 25 Samples', cost: 35000 },
                { id: 6, item: 'Test Fixtures', cost: 25000 },
                { id: 7, item: 'Compliance Testing', cost: 95000 }
            ]);

            const [deliverableCategories, setDeliverableCategories] = useState([
                {
                    id: 1,
                    title: 'Electrical Design',
                    items: [
                        'Complete schematics for AC/DC and DC/DC',
                        'PCB layout files (Gerber, ODB++)',
                        'Bill of Materials with alternates',
                        'Component derating analysis',
                        'Power supply calculations',
                        'Protection circuit specs',
                        'DFMEA documentation'
                    ]
                },
                {
                    id: 2,
                    title: 'Firmware & Software',
                    items: [
                        'Complete firmware source code',
                        'Charge control algorithms',
                        'SMBus protocol implementation',
                        'Current scaling logic',
                        'State machine diagrams',
                        'Field update procedures',
                        'Software DFMEA'
                    ]
                },
                {
                    id: 3,
                    title: 'Testing & Validation',
                    items: [
                        'Comprehensive DVT test reports',
                        'Efficiency characterization data',
                        'Thermal analysis results',
                        'EMI/EMC test reports',
                        'Safety certification reports',
                        'Reliability analysis (MTBF)',
                        'Environmental testing results'
                    ]
                },
                {
                    id: 4,
                    title: 'Production Docs',
                    items: [
                        'PPAP documentation package',
                        'PFMEA (Process FMEA)',
                        'Assembly work instructions',
                        'Test fixture documentation',
                        'Quality control procedures',
                        'Certificate of Conformance',
                        'RoHS/REACH compliance'
                    ]
                }
            ]);

            // Calculate totals
            const totalWeeks = stageGates.reduce((sum, stage) => {
                const weeks = parseInt(stage.duration.split('-')[1]);
                return sum + (isNaN(weeks) ? 0 : weeks);
            }, 0);
            const totalNRE = stageGates.reduce((sum, s) => sum + (parseInt(s.nreCost) || 0), 0);
            const totalTooling = costItems.reduce((sum, b) => sum + (parseInt(b.cost) || 0), 0);
            const grandTotal = totalNRE + totalTooling;

            // Save to localStorage
            const saveData = () => {
                const data = { headerInfo, projectSpecs, powerSupplySpecs, stageGates, costItems, deliverableCategories };
                localStorage.setItem('axonProposal', JSON.stringify(data));
                alert('Proposal saved locally!');
            };

            // Load from localStorage
            useEffect(() => {
                const saved = localStorage.getItem('axonProposal');
                if (saved) {
                    try {
                        const data = JSON.parse(saved);
                        if (data.headerInfo) setHeaderInfo(data.headerInfo);
                        if (data.projectSpecs) setProjectSpecs(data.projectSpecs);
                        if (data.powerSupplySpecs) setPowerSupplySpecs(data.powerSupplySpecs);
                        if (data.stageGates) setStageGates(data.stageGates);
                        if (data.costItems) setCostItems(data.costItems);
                        if (data.deliverableCategories) setDeliverableCategories(data.deliverableCategories);
                    } catch (e) {}
                }
            }, []);

            // Export as JSON
            const exportJSON = () => {
                const data = { headerInfo, projectSpecs, powerSupplySpecs, stageGates, costItems, deliverableCategories };
                const blob = new Blob([JSON.stringify(data, null, 2)], { type: 'application/json' });
                const url = URL.createObjectURL(blob);
                const a = document.createElement('a');
                a.href = url;
                a.download = 'axon-proposal-data.json';
                a.click();
            };

            // Import JSON
            const importJSON = (e) => {
                const file = e.target.files[0];
                if (file) {
                    const reader = new FileReader();
                    reader.onload = (event) => {
                        try {
                            const data = JSON.parse(event.target.result);
                            if (data.headerInfo) setHeaderInfo(data.headerInfo);
                            if (data.projectSpecs) setProjectSpecs(data.projectSpecs);
                            if (data.powerSupplySpecs) setPowerSupplySpecs(data.powerSupplySpecs);
                            if (data.stageGates) setStageGates(data.stageGates);
                            if (data.costItems) setCostItems(data.costItems);
                            if (data.deliverableCategories) setDeliverableCategories(data.deliverableCategories);
                            alert('Data imported successfully!');
                        } catch (err) {
                            alert('Error reading file');
                        }
                    };
                    reader.readAsText(file);
                }
            };

            // Charging Bay Spec handlers
            const updateSpec = (id, field, value) => {
                setProjectSpecs(projectSpecs.map(s => s.id === id ? { ...s, [field]: value } : s));
            };
            const addSpec = () => {
                const newId = Math.max(...projectSpecs.map(s => s.id), 0) + 1;
                setProjectSpecs([...projectSpecs, { id: newId, name: 'New Spec', value: 'Value' }]);
            };
            const deleteSpec = (id) => {
                setProjectSpecs(projectSpecs.filter(s => s.id !== id));
            };

            // Power Supply Spec handlers
            const updatePowerSpec = (id, field, value) => {
                setPowerSupplySpecs(powerSupplySpecs.map(s => s.id === id ? { ...s, [field]: value } : s));
            };
            const addPowerSpec = () => {
                const newId = Math.max(...powerSupplySpecs.map(s => s.id), 0) + 1;
                setPowerSupplySpecs([...powerSupplySpecs, { id: newId, name: 'New Spec', value: 'Value' }]);
            };
            const deletePowerSpec = (id) => {
                setPowerSupplySpecs(powerSupplySpecs.filter(s => s.id !== id));
            };

            // Stage handlers
            const updateStage = (id, field, value) => {
                setStageGates(stageGates.map(s => s.id === id ? { ...s, [field]: value } : s));
            };
            const addStage = () => {
                const newId = Math.max(...stageGates.map(s => s.id), 0) + 1;
                const newStageNum = stageGates.length + 1;
                setStageGates([...stageGates, {
                    id: newId,
                    stage: newStageNum,
                    name: 'New Stage',
                    duration: '4-6 Weeks',
                    nreCost: 10000,
                    activities: ['Activity 1'],
                    deliverables: ['Deliverable 1']
                }]);
            };
            const deleteStage = (id) => {
                const filtered = stageGates.filter(s => s.id !== id);
                // Renumber stages
                setStageGates(filtered.map((s, i) => ({ ...s, stage: i + 1 })));
            };
            const updateStageActivity = (stageId, idx, value) => {
                setStageGates(stageGates.map(s => {
                    if (s.id === stageId) {
                        const newActivities = [...s.activities];
                        newActivities[idx] = value;
                        return { ...s, activities: newActivities };
                    }
                    return s;
                }));
            };
            const addStageActivity = (stageId) => {
                setStageGates(stageGates.map(s => {
                    if (s.id === stageId) {
                        return { ...s, activities: [...s.activities, 'New activity'] };
                    }
                    return s;
                }));
            };
            const deleteStageActivity = (stageId, idx) => {
                setStageGates(stageGates.map(s => {
                    if (s.id === stageId) {
                        const newActivities = s.activities.filter((_, i) => i !== idx);
                        return { ...s, activities: newActivities };
                    }
                    return s;
                }));
            };
            const updateStageDeliverable = (stageId, idx, value) => {
                setStageGates(stageGates.map(s => {
                    if (s.id === stageId) {
                        const newDeliverables = [...s.deliverables];
                        newDeliverables[idx] = value;
                        return { ...s, deliverables: newDeliverables };
                    }
                    return s;
                }));
            };
            const addStageDeliverable = (stageId) => {
                setStageGates(stageGates.map(s => {
                    if (s.id === stageId) {
                        return { ...s, deliverables: [...s.deliverables, 'New deliverable'] };
                    }
                    return s;
                }));
            };
            const deleteStageDeliverable = (stageId, idx) => {
                setStageGates(stageGates.map(s => {
                    if (s.id === stageId) {
                        const newDeliverables = s.deliverables.filter((_, i) => i !== idx);
                        return { ...s, deliverables: newDeliverables };
                    }
                    return s;
                }));
            };

            // Cost handlers
            const updateCostItem = (id, field, value) => {
                setCostItems(costItems.map(c => c.id === id ? { ...c, [field]: field === 'cost' ? (parseInt(value) || 0) : value } : c));
            };
            const addCostItem = () => {
                const newId = Math.max(...costItems.map(c => c.id), 0) + 1;
                setCostItems([...costItems, { id: newId, item: 'New Cost Item', cost: 0 }]);
            };
            const deleteCostItem = (id) => {
                setCostItems(costItems.filter(c => c.id !== id));
            };

            // Deliverable category handlers
            const updateCategory = (id, field, value) => {
                setDeliverableCategories(deliverableCategories.map(c => c.id === id ? { ...c, [field]: value } : c));
            };
            const addCategory = () => {
                const newId = Math.max(...deliverableCategories.map(c => c.id), 0) + 1;
                setDeliverableCategories([...deliverableCategories, { id: newId, title: 'New Category', items: ['Item 1'] }]);
            };
            const deleteCategory = (id) => {
                setDeliverableCategories(deliverableCategories.filter(c => c.id !== id));
            };
            const updateCategoryItem = (catId, idx, value) => {
                setDeliverableCategories(deliverableCategories.map(c => {
                    if (c.id === catId) {
                        const newItems = [...c.items];
                        newItems[idx] = value;
                        return { ...c, items: newItems };
                    }
                    return c;
                }));
            };
            const addCategoryItem = (catId) => {
                setDeliverableCategories(deliverableCategories.map(c => {
                    if (c.id === catId) {
                        return { ...c, items: [...c.items, 'New item'] };
                    }
                    return c;
                }));
            };
            const deleteCategoryItem = (catId, idx) => {
                setDeliverableCategories(deliverableCategories.map(c => {
                    if (c.id === catId) {
                        const newItems = c.items.filter((_, i) => i !== idx);
                        return { ...c, items: newItems };
                    }
                    return c;
                }));
            };

            const renderOverview = () => (
                <div className="space-y-6">
                    <div className="bg-blue-50 p-6 rounded-lg border border-blue-200">
                        <h2 className="text-2xl font-bold text-blue-900 mb-4">Thor (SP2) Battery Charger Development</h2>
                        <div className="grid md:grid-cols-2 gap-4 text-sm">
                            <div>
                                <p className="text-blue-700 font-semibold">Duration:</p>
                                <p className="text-blue-900 text-lg font-bold">{totalWeeks} weeks</p>
                            </div>
                            <div>
                                <p className="text-blue-700 font-semibold">Total Investment:</p>
                                <p className="text-blue-900 text-lg font-bold">${grandTotal.toLocaleString()}</p>
                            </div>
                        </div>
                    </div>

                    {/* Charging Bay Specifications */}
                    <div className="bg-white p-6 rounded-lg border border-gray-200">
                        <div className="flex justify-between items-center mb-4">
                            <h3 className="text-xl font-bold text-gray-800">ðŸ”‹ Charging Bay Specifications</h3>
                            {editMode && (
                                <button onClick={addSpec} className="px-3 py-1 bg-green-600 text-white rounded hover:bg-green-700 text-sm">
                                    + Add Specification
                                </button>
                            )}
                        </div>
                        <div className="grid md:grid-cols-2 gap-3">
                            {projectSpecs.map((spec) => (
                                <div key={spec.id} className="flex items-center gap-2 py-2 px-3 border border-gray-100 rounded-lg bg-gray-50">
                                    {editMode ? (
                                        <>
                                            <input
                                                type="text"
                                                value={spec.name}
                                                onChange={(e) => updateSpec(spec.id, 'name', e.target.value)}
                                                className="flex-1 px-2 py-1 border rounded text-sm text-gray-600"
                                                placeholder="Spec name"
                                            />
                                            <span className="text-gray-400">:</span>
                                            <input
                                                type="text"
                                                value={spec.value}
                                                onChange={(e) => updateSpec(spec.id, 'value', e.target.value)}
                                                className="flex-1 px-2 py-1 border rounded text-sm font-semibold"
                                                placeholder="Value"
                                            />
                                            <button onClick={() => deleteSpec(spec.id)} className="text-red-500 hover:text-red-700 px-1">âœ•</button>
                                        </>
                                    ) : (
                                        <>
                                            <span className="text-gray-600 text-sm">{spec.name}:</span>
                                            <span className="font-semibold text-gray-800 ml-auto">{spec.value}</span>
                                        </>
                                    )}
                                </div>
                            ))}
                        </div>
                    </div>

                    {/* External Power Supply Specifications */}
                    <div className="bg-white p-6 rounded-lg border border-gray-200">
                        <div className="flex justify-between items-center mb-4">
                            <h3 className="text-xl font-bold text-gray-800">âš¡ External Power Supply Specifications</h3>
                            {editMode && (
                                <button onClick={addPowerSpec} className="px-3 py-1 bg-green-600 text-white rounded hover:bg-green-700 text-sm">
                                    + Add Specification
                                </button>
                            )}
                        </div>
                        <div className="grid md:grid-cols-2 gap-3">
                            {powerSupplySpecs.map((spec) => (
                                <div key={spec.id} className="flex items-center gap-2 py-2 px-3 border border-amber-100 rounded-lg bg-amber-50">
                                    {editMode ? (
                                        <>
                                            <input
                                                type="text"
                                                value={spec.name}
                                                onChange={(e) => updatePowerSpec(spec.id, 'name', e.target.value)}
                                                className="flex-1 px-2 py-1 border rounded text-sm text-gray-600"
                                                placeholder="Spec name"
                                            />
                                            <span className="text-gray-400">:</span>
                                            <input
                                                type="text"
                                                value={spec.value}
                                                onChange={(e) => updatePowerSpec(spec.id, 'value', e.target.value)}
                                                className="flex-1 px-2 py-1 border rounded text-sm font-semibold"
                                                placeholder="Value"
                                            />
                                            <button onClick={() => deletePowerSpec(spec.id)} className="text-red-500 hover:text-red-700 px-1">âœ•</button>
                                        </>
                                    ) : (
                                        <>
                                            <span className="text-gray-600 text-sm">{spec.name}:</span>
                                            <span className="font-semibold text-gray-800 ml-auto">{spec.value}</span>
                                        </>
                                    )}
                                </div>
                            ))}
                        </div>
                    </div>
                </div>
            );

            const renderTimeline = () => (
                <div className="space-y-4">
                    <div className="bg-purple-50 p-6 rounded-lg border border-purple-200">
                        <div className="flex justify-between items-center">
                            <div>
                                <h2 className="text-2xl font-bold text-purple-900 mb-2">Development Timeline</h2>
                                <p className="text-purple-700">{stageGates.length} Stage Gates â€¢ {totalWeeks} weeks total</p>
                            </div>
                            {editMode && (
                                <button onClick={addStage} className="px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700">
                                    + Add Stage
                                </button>
                            )}
                        </div>
                    </div>

                    {stageGates.map((gate) => (
                        <div key={gate.id} className="bg-white rounded-lg border border-gray-200 overflow-hidden">
                            <div className="bg-blue-600 p-4 text-white">
                                <div className="flex justify-between items-start">
                                    <div className="flex-1">
                                        <div className="flex items-center gap-2 mb-2">
                                            <span className="text-lg font-bold">Stage {gate.stage}:</span>
                                            {editMode ? (
                                                <input
                                                    type="text"
                                                    value={gate.name}
                                                    onChange={(e) => updateStage(gate.id, 'name', e.target.value)}
                                                    className="bg-blue-700 px-2 py-1 rounded text-white border-none text-lg font-bold"
                                                />
                                            ) : (
                                                <span className="text-lg font-bold">{gate.name}</span>
                                            )}
                                        </div>
                                        {editMode ? (
                                            <input
                                                type="text"
                                                value={gate.duration}
                                                onChange={(e) => updateStage(gate.id, 'duration', e.target.value)}
                                                className="bg-blue-700 px-2 py-1 rounded text-blue-100 text-sm"
                                                placeholder="e.g. 4-6 Weeks"
                                            />
                                        ) : (
                                            <p className="text-blue-100 text-sm">{gate.duration}</p>
                                        )}
                                    </div>
                                    <div className="text-right">
                                        <p className="text-blue-100 text-xs mb-1">NRE Cost</p>
                                        {editMode ? (
                                            <div className="flex items-center gap-1">
                                                <span>$</span>
                                                <input
                                                    type="number"
                                                    value={gate.nreCost}
                                                    onChange={(e) => updateStage(gate.id, 'nreCost', parseInt(e.target.value) || 0)}
                                                    className="bg-blue-700 px-2 py-1 rounded text-white text-xl font-bold w-28 text-right"
                                                />
                                            </div>
                                        ) : (
                                            <p className="text-xl font-bold">${gate.nreCost.toLocaleString()}</p>
                                        )}
                                        {editMode && (
                                            <button onClick={() => deleteStage(gate.id)} className="mt-2 text-red-300 hover:text-red-100 text-sm">
                                                Delete Stage
                                            </button>
                                        )}
                                    </div>
                                </div>
                            </div>

                            <div className="p-6 grid md:grid-cols-2 gap-6">
                                <div>
                                    <div className="flex justify-between items-center mb-3">
                                        <h4 className="font-semibold text-gray-800">Activities:</h4>
                                        {editMode && (
                                            <button onClick={() => addStageActivity(gate.id)} className="text-blue-600 hover:text-blue-800 text-sm">
                                                + Add
                                            </button>
                                        )}
                                    </div>
                                    <ul className="space-y-2">
                                        {gate.activities.map((activity, idx) => (
                                            <li key={idx} className="flex items-center gap-2">
                                                <span className="text-blue-500">â†’</span>
                                                {editMode ? (
                                                    <>
                                                        <input
                                                            type="text"
                                                            value={activity}
                                                            onChange={(e) => updateStageActivity(gate.id, idx, e.target.value)}
                                                            className="flex-1 px-2 py-1 border rounded text-sm"
                                                        />
                                                        <button onClick={() => deleteStageActivity(gate.id, idx)} className="text-red-500 hover:text-red-700">âœ•</button>
                                                    </>
                                                ) : (
                                                    <span className="text-sm text-gray-700">{activity}</span>
                                                )}
                                            </li>
                                        ))}
                                    </ul>
                                </div>

                                <div>
                                    <div className="flex justify-between items-center mb-3">
                                        <h4 className="font-semibold text-gray-800">Deliverables:</h4>
                                        {editMode && (
                                            <button onClick={() => addStageDeliverable(gate.id)} className="text-green-600 hover:text-green-800 text-sm">
                                                + Add
                                            </button>
                                        )}
                                    </div>
                                    <ul className="space-y-2">
                                        {gate.deliverables.map((deliverable, idx) => (
                                            <li key={idx} className="flex items-center gap-2">
                                                <span className="text-green-500">âœ“</span>
                                                {editMode ? (
                                                    <>
                                                        <input
                                                            type="text"
                                                            value={deliverable}
                                                            onChange={(e) => updateStageDeliverable(gate.id, idx, e.target.value)}
                                                            className="flex-1 px-2 py-1 border rounded text-sm"
                                                        />
                                                        <button onClick={() => deleteStageDeliverable(gate.id, idx)} className="text-red-500 hover:text-red-700">âœ•</button>
                                                    </>
                                                ) : (
                                                    <span className="text-sm text-gray-700">{deliverable}</span>
                                                )}
                                            </li>
                                        ))}
                                    </ul>
                                </div>
                            </div>
                        </div>
                    ))}
                </div>
            );

            const renderCosts = () => (
                <div className="space-y-6">
                    <div className="bg-green-50 p-6 rounded-lg border border-green-200">
                        <h2 className="text-2xl font-bold text-green-900 mb-4">Investment Summary</h2>
                        <div className="grid md:grid-cols-3 gap-4">
                            <div className="bg-white p-4 rounded-lg shadow-sm">
                                <p className="text-green-700 text-sm font-semibold">NRE Development</p>
                                <p className="text-3xl font-bold text-green-900">${totalNRE.toLocaleString()}</p>
                            </div>
                            <div className="bg-white p-4 rounded-lg shadow-sm">
                                <p className="text-green-700 text-sm font-semibold">Tooling & Testing</p>
                                <p className="text-3xl font-bold text-green-900">${totalTooling.toLocaleString()}</p>
                            </div>
                            <div className="bg-white p-4 rounded-lg shadow-sm border-2 border-green-400">
                                <p className="text-green-700 text-sm font-semibold">Total Investment</p>
                                <p className="text-3xl font-bold text-green-900">${grandTotal.toLocaleString()}</p>
                            </div>
                        </div>
                    </div>

                    <div className="bg-white p-6 rounded-lg border border-gray-200">
                        <h3 className="text-xl font-bold text-gray-800 mb-4">NRE by Stage Gate</h3>
                        <div className="space-y-2">
                            {stageGates.map((gate) => (
                                <div key={gate.id} className="flex justify-between items-center p-3 bg-gray-50 rounded-lg">
                                    <div>
                                        <p className="font-semibold text-gray-800">Stage {gate.stage}: {gate.name}</p>
                                        <p className="text-sm text-gray-600">{gate.duration}</p>
                                    </div>
                                    <p className="text-lg font-bold text-blue-600">${(parseInt(gate.nreCost) || 0).toLocaleString()}</p>
                                </div>
                            ))}
                            <div className="flex justify-between items-center p-3 bg-blue-100 rounded-lg border-2 border-blue-300">
                                <p className="font-bold text-blue-900">Total NRE</p>
                                <p className="text-xl font-bold text-blue-900">${totalNRE.toLocaleString()}</p>
                            </div>
                        </div>
                    </div>

                    <div className="bg-white p-6 rounded-lg border border-gray-200">
                        <div className="flex justify-between items-center mb-4">
                            <h3 className="text-xl font-bold text-gray-800">Tooling, Samples & Testing</h3>
                            {editMode && (
                                <button onClick={addCostItem} className="px-3 py-1 bg-green-600 text-white rounded hover:bg-green-700 text-sm">
                                    + Add Cost Item
                                </button>
                            )}
                        </div>
                        <div className="space-y-2">
                            {costItems.map((item) => (
                                <div key={item.id} className="flex justify-between items-center p-3 bg-gray-50 rounded-lg">
                                    {editMode ? (
                                        <>
                                            <input
                                                type="text"
                                                value={item.item}
                                                onChange={(e) => updateCostItem(item.id, 'item', e.target.value)}
                                                className="flex-1 px-2 py-1 border rounded mr-4"
                                            />
                                            <div className="flex items-center gap-2">
                                                <span className="text-gray-600">$</span>
                                                <input
                                                    type="number"
                                                    value={item.cost}
                                                    onChange={(e) => updateCostItem(item.id, 'cost', e.target.value)}
                                                    className="w-28 px-2 py-1 border rounded font-semibold text-right"
                                                />
                                                <button onClick={() => deleteCostItem(item.id)} className="text-red-500 hover:text-red-700 ml-2">âœ•</button>
                                            </div>
                                        </>
                                    ) : (
                                        <>
                                            <p className="text-gray-800">{item.item}</p>
                                            <p className="font-semibold text-gray-900">${item.cost.toLocaleString()}</p>
                                        </>
                                    )}
                                </div>
                            ))}
                            <div className="flex justify-between items-center p-3 bg-green-100 rounded-lg border-2 border-green-300">
                                <p className="font-bold text-green-900">Total Tooling & Testing</p>
                                <p className="text-xl font-bold text-green-900">${totalTooling.toLocaleString()}</p>
                            </div>
                        </div>
                    </div>
                </div>
            );

            const renderDeliverables = () => (
                <div className="space-y-6">
                    <div className="bg-indigo-50 p-6 rounded-lg border border-indigo-200">
                        <div className="flex justify-between items-center">
                            <div>
                                <h2 className="text-2xl font-bold text-indigo-900 mb-2">Complete Deliverables</h2>
                                <p className="text-indigo-700">Comprehensive documentation and source files</p>
                            </div>
                            {editMode && (
                                <button onClick={addCategory} className="px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700">
                                    + Add Category
                                </button>
                            )}
                        </div>
                    </div>

                    <div className="grid md:grid-cols-2 gap-6">
                        {deliverableCategories.map((category) => (
                            <div key={category.id} className="bg-white p-6 rounded-lg border border-gray-200">
                                <div className="flex justify-between items-center mb-4">
                                    {editMode ? (
                                        <input
                                            type="text"
                                            value={category.title}
                                            onChange={(e) => updateCategory(category.id, 'title', e.target.value)}
                                            className="text-lg font-bold text-gray-800 px-2 py-1 border rounded flex-1 mr-2"
                                        />
                                    ) : (
                                        <h3 className="text-lg font-bold text-gray-800">{category.title}</h3>
                                    )}
                                    {editMode && (
                                        <div className="flex gap-2">
                                            <button onClick={() => addCategoryItem(category.id)} className="text-blue-600 hover:text-blue-800 text-sm">+ Add</button>
                                            <button onClick={() => deleteCategory(category.id)} className="text-red-500 hover:text-red-700 text-sm">Delete</button>
                                        </div>
                                    )}
                                </div>
                                <ul className="space-y-2">
                                    {category.items.map((item, idx) => (
                                        <li key={idx} className="flex items-center gap-2 text-sm text-gray-700">
                                            <span className="text-indigo-500">â€¢</span>
                                            {editMode ? (
                                                <>
                                                    <input
                                                        type="text"
                                                        value={item}
                                                        onChange={(e) => updateCategoryItem(category.id, idx, e.target.value)}
                                                        className="flex-1 px-2 py-1 border rounded"
                                                    />
                                                    <button onClick={() => deleteCategoryItem(category.id, idx)} className="text-red-500 hover:text-red-700">âœ•</button>
                                                </>
                                            ) : (
                                                <span>{item}</span>
                                            )}
                                        </li>
                                    ))}
                                </ul>
                            </div>
                        ))}
                    </div>
                </div>
            );

            return (
                <div className="min-h-screen bg-gray-50">
                    {/* Editable Header */}
                    <div className="bg-gradient-to-r from-blue-600 to-blue-800 text-white p-8">
                        <div className="max-w-6xl mx-auto">
                            {editMode ? (
                                <>
                                    <input
                                        type="text"
                                        value={headerInfo.projectTitle}
                                        onChange={(e) => setHeaderInfo({ ...headerInfo, projectTitle: e.target.value })}
                                        className="text-4xl font-bold mb-2 bg-blue-700 px-3 py-1 rounded w-full"
                                        placeholder="Project Title"
                                    />
                                    <input
                                        type="text"
                                        value={headerInfo.subtitle}
                                        onChange={(e) => setHeaderInfo({ ...headerInfo, subtitle: e.target.value })}
                                        className="text-lg bg-blue-700 px-3 py-1 rounded w-full text-blue-100"
                                        placeholder="Subtitle"
                                    />
                                    <div className="mt-4 flex gap-4 text-sm">
                                        <input
                                            type="text"
                                            value={headerInfo.companyName}
                                            onChange={(e) => setHeaderInfo({ ...headerInfo, companyName: e.target.value })}
                                            className="bg-blue-700 px-4 py-2 rounded"
                                            placeholder="Company Name"
                                        />
                                        <input
                                            type="text"
                                            value={headerInfo.date}
                                            onChange={(e) => setHeaderInfo({ ...headerInfo, date: e.target.value })}
                                            className="bg-blue-700 px-4 py-2 rounded"
                                            placeholder="Date"
                                        />
                                    </div>
                                </>
                            ) : (
                                <>
                                    <h1 className="text-4xl font-bold mb-2">{headerInfo.projectTitle}</h1>
                                    <p className="text-blue-100 text-lg">{headerInfo.subtitle}</p>
                                    <div className="mt-4 flex gap-4 text-sm">
                                        <div className="bg-blue-700 px-4 py-2 rounded">{headerInfo.companyName}</div>
                                        <div className="bg-blue-700 px-4 py-2 rounded">{headerInfo.date}</div>
                                    </div>
                                </>
                            )}
                        </div>
                    </div>

                    {/* Navigation & Controls */}
                    <div className="bg-white border-b sticky top-0 z-10 shadow">
                        <div className="max-w-6xl mx-auto px-8">
                            <div className="flex items-center justify-between py-4 flex-wrap gap-2">
                                <div className="flex gap-2 flex-wrap">
                                    <button
                                        onClick={() => setActiveSection('overview')}
                                        className={`flex items-center gap-2 px-5 py-2.5 rounded-lg font-medium ${
                                            activeSection === 'overview' ? 'bg-blue-600 text-white' : 'bg-gray-100 text-gray-700 hover:bg-gray-200'
                                        }`}
                                    >
                                        ðŸ“„ Overview
                                    </button>
                                    <button
                                        onClick={() => setActiveSection('timeline')}
                                        className={`flex items-center gap-2 px-5 py-2.5 rounded-lg font-medium ${
                                            activeSection === 'timeline' ? 'bg-blue-600 text-white' : 'bg-gray-100 text-gray-700 hover:bg-gray-200'
                                        }`}
                                    >
                                        ðŸ“… Timeline
                                    </button>
                                    <button
                                        onClick={() => setActiveSection('costs')}
                                        className={`flex items-center gap-2 px-5 py-2.5 rounded-lg font-medium ${
                                            activeSection === 'costs' ? 'bg-blue-600 text-white' : 'bg-gray-100 text-gray-700 hover:bg-gray-200'
                                        }`}
                                    >
                                        ðŸ’° Costs
                                    </button>
                                    <button
                                        onClick={() => setActiveSection('deliverables')}
                                        className={`flex items-center gap-2 px-5 py-2.5 rounded-lg font-medium ${
                                            activeSection === 'deliverables' ? 'bg-blue-600 text-white' : 'bg-gray-100 text-gray-700 hover:bg-gray-200'
                                        }`}
                                    >
                                        âš™ï¸ Deliverables
                                    </button>
                                </div>
                                <div className="flex gap-2 items-center flex-wrap">
                                    <button
                                        onClick={() => setEditMode(!editMode)}
                                        className={`px-4 py-2 rounded-lg font-medium ${
                                            editMode ? 'bg-orange-500 text-white' : 'bg-gray-200 text-gray-700'
                                        }`}
                                    >
                                        {editMode ? 'âœŽ Editing ON' : 'âœŽ Edit Mode'}
                                    </button>
                                    <button onClick={saveData} className="px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700">
                                        ðŸ’¾ Save
                                    </button>
                                    <button onClick={exportJSON} className="px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700">
                                        ðŸ“¤ Export
                                    </button>
                                    <label className="px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 cursor-pointer">
                                        ðŸ“¥ Import
                                        <input type="file" accept=".json" onChange={importJSON} className="hidden" />
                                    </label>
                                </div>
                            </div>
                        </div>
                    </div>

                    {/* Content */}
                    <div className="max-w-6xl mx-auto p-8">
                        {activeSection === 'overview' && renderOverview()}
                        {activeSection === 'timeline' && renderTimeline()}
                        {activeSection === 'costs' && renderCosts()}
                        {activeSection === 'deliverables' && renderDeliverables()}
                    </div>

                    {/* Footer */}
                    <div className="bg-gray-800 text-white p-6 mt-8">
                        <div className="max-w-6xl mx-auto text-center text-sm text-gray-400">
                            <p>Confidential Proposal | {headerInfo.companyName} Â© 2026</p>
                            <p className="mt-1">Prepared for Axon Enterprise</p>
                        </div>
                    </div>
                </div>
            );
        };

        ReactDOM.render(<AxonChargerProposal />, document.getElementById('root'));
    </script>
</body>
</html>
